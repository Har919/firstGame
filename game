// Variable declaration
var currentXPositionDoctor;
var newXPositionDoctor;
var currentYPositionCoronavirus;
var newYPositionCoronavirus;
var currentXPositionProjectile;
var currentYPositionProjectile;
var newXPositionProjectile;
var newYPositionProjectile;

// All the function calls within the program
doctorMove();
moveDown();

// Allows user to move the doctor left and right; moving off screen will bring you to the other side of the screen
function doctorMove() {
  onEvent("gameScreen", "keydown", function(event) {
    if (event.key == "a") {
      currentXPositionDoctor = getXPosition("doctor");
      newXPositionDoctor = currentXPositionDoctor - 3;
      setPosition("doctor", newXPositionDoctor, 370);
    } else if (event.key == "d") {
      currentXPositionDoctor = getXPosition("doctor");
      newXPositionDoctor = currentXPositionDoctor + 3;
      setPosition("doctor", newXPositionDoctor, 370);
    }
    if (getXPosition("doctor") > 270) {
      setPosition("doctor",-50,370);
    }
    if (getXPosition("doctor") < -50) {
      setPosition("doctor",270,370);
    }
    if (event.key == "Shift") {
      currentXPositionDoctor = getXPosition("doctor");
      newXPositionDoctor = currentXPositionDoctor - 27;
      setPosition("doctor", newXPositionDoctor, 370);
    }
    if (event.key == " ") {
      currentXPositionDoctor = getXPosition("doctor");
      newXPositionDoctor = currentXPositionDoctor + 27;
      setPosition("doctor", newXPositionDoctor, 370);
    }
  });
}

// When pressing start button, it switches to game screen and starts the game by moving coronavirus downwards
onEvent("startButton", "click", function() {
  setScreen("gameScreen");
  timedLoop(1, moveDown);
});

// Allows the coronavirus to move down until it reaches the bottom of the screen
function moveDown() {
    currentYPositionCoronavirus = getYPosition("coronavirusCell");
    newYPositionCoronavirus = currentYPositionCoronavirus + 1;
    setPosition("coronavirusCell",110,newYPositionCoronavirus);
    console.log(currentYPositionCoronavirus);
    if (currentYPositionCoronavirus >= 380) {
    stopTimedLoop();
  }
}

// Shoots the projectile that the doctor uses to destroy the coronavirus
onEvent("gameScreen", "keydown", function(event) {
  if (event.key == "s") {
    currentXPositionProjectile = currentXPositionDoctor;
    
  }
});
